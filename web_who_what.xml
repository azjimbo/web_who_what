<form>
  <label>web who what</label>
  <search id="wwebww">
    <query>
| tstats count as Events earliest(_time) as etime latest(_time) as ltime  from datamodel=Web.Web WHERE NOT Web.src IN("192.168.0.*","*:*") groupby _time Web.http_user_agent Web.http_referrer Web.http_method Web.uri_path Web.src Web.url Web.status host
| convert ctime(etime), ctime(ltime)
| rename Web.* AS *
| rename src AS clientip
| lookup dnslookup clientip      
| fillnull value="(filled null)"
| eval munge=host+status+url+uri_path+clientip+http_user_agent+http_referrer     
    </query>
    <earliest>$timey.earliest$</earliest>
    <latest>$timey.latest$</latest>
  </search>
  <fieldset submitButton="false" autoRun="true">
    <input type="time" token="timey" searchWhenChanged="true">
      <label>when</label>
      <default>
        <earliest>-4h@h</earliest>
        <latest>now</latest>
      </default>
    </input>
    <input type="multiselect" token="which" searchWhenChanged="true">
      <label>where</label>
      <search>
        <query>| metadata type=hosts index=websitelogs
| fields host</query>
        <earliest>-24h@h</earliest>
        <latest>now</latest>
      </search>
      <fieldForLabel>host</fieldForLabel>
      <fieldForValue>host</fieldForValue>
      <valuePrefix>"</valuePrefix>
      <valueSuffix>"</valueSuffix>
      <delimiter>,</delimiter>
      <choice value="*">All</choice>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="checkbox" token="filter" id="input_checkbox">
      <label>which</label>
      <choice value="clientip,clienthost">who</choice>
      <choice value="uri_path,host">what</choice>
      <default>"clientip,clienthost"</default>
      <initialValue>clientip,clienthost</initialValue>
      <delimiter> </delimiter>
    </input>
  <input type="checkbox" token="how" searchWhenChanged="true">
  <label>how</label>
  <choice value="values(http_user_agent) as &quot;useragent(s)&quot;">UserAgent(s)</choice>
  <default></default>
  <change>
    <condition value="values(http_user_agent) as &quot;useragent(s)&quot;">
      <set token="form.txtExclude">$value$</set>
      <set token="exclude">$value$</set>
    </condition>
    <condition>
      <unset token="exclude" />
      <unset token="form.txtExclude" />
    </condition>
  </change>
</input>
    <input type="text" token="what">
      <label>whatever</label>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
  </fieldset>
  <row>
    <panel>
      <table>
        <search base="wwebww">
          <query>
|search host IN($which$) (munge=*$what$* OR clienthost="*$what$*")
| stats $how$  values(status) as "status(s)" dc(clientip) as "clientip(s)" dc(url) as "url(s)" sparkline count by $filter$ 
| sort - count</query>
        </search>
        <option name="count">25</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">none</option>
        <option name="percentagesRow">false</option>
        <option name="rowNumbers">false</option>
        <option name="totalsRow">false</option>
        <option name="wrap">true</option>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <html>have fun, do good things.<P> . </P> <P> . </P><P> .  </P><P> . </P>
<!-- working on getting the check boxes side by side - this part is a work in progress.
      <style>
             #input_checkbox  div[data-component="splunk-core:/splunkjs/mvc/components/Dropdown"]{
             width: 500px !important;
           }
        -->
<!--           
        #input_checkbox{
          width: 20% !important;
        }
        .control.shared-controls-syntheticcheckboxcontrol.control-default{
          display: inline-block !important;
        }  
      
       </style> --> 
</html>
    </panel>
  </row>
</form>
